<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calc with dialog</title>
    <style>
      :root {
        color-scheme: dark;
        --red: unset;
        font-family: Verdana, Geneva, Tahoma, sans-serif;
      }
      dialog {
        width: 225px;
        height: 400px;
      }
      button[name="ok"] {
        display: block;
        margin-top: 15px;
      }
      h2 {
        color: dodgerblue;
      }
      input {
        width: 100px;
      }
    </style>
  </head>
  <body>
    <h3>Calc with dialog</h3>
    <div id="res"></div>
    <button>Open</button>
    <button name="clear">Clear</button>
    <dialog>
      <h2>Modal Calc</h2>

      <button>Fechar</button>
    </dialog>
    <script>
      const btn = document.querySelector("button");
      const btnClose = document.querySelector("dialog button");
      const dialog = document.querySelector("dialog");
      btn.onclick = () => {
        dialog.showModal();
      };

      btnClose.onclick = function () {
        dialog.close();
      };

      for (let i = 1; i <= 3; i++) {
        const p = document.createElement("p");
        const inpt = document.createElement("input");

        inpt.setAttribute("id", [i]);
        inpt.setAttribute("type", "number");
        p.textContent += `Nota: ${i}`;
        dialog.appendChild(p);
        dialog.appendChild(inpt);
      }
      const button = document.createElement("button");
      button.setAttribute("name", "ok");
      button.insertAdjacentText("beforebegin", "<br>");
      button.innerText = `Computar`;
      dialog.appendChild(button);

      const Calc = document.querySelector("dialog button[name='ok']");
      const todosNum = Array.from(
        document.querySelectorAll("input[type='number']")
      );

      Calc.onclick = function () {
        let filval = todosNum.map((val) => +val.value);
        let soma = filval.reduce((total, val) => (total += val));
        let media = soma / 3;
        console.log(filval);
        document.getElementById("res").innerHTML = `<p>Notas: ${filval.map(
          (a) => `[${a}]`
        )}</p> <p>Soma: ${soma} </p> <p>Media: ${media}</p> 
        <p>Situação: ${media >= 6 ? "Aprovado" : "Reprovado"}</p>`;
        dialog.close(); //para fechar o dialog after click
      };
      //clean
      document.querySelector("button[name='clear']").onclick = function () {
        document.getElementById("res").innerHTML = "";
      };
    </script>
  </body>
</html>
