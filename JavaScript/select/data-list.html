<!DOCTYPE html>
<html lang="en" style="color-scheme: dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body>
    <main>
      <label for="search">Escolha um item ou digite / Search:</label>
      <input type="text" id="search" list="search-options" />

      <datalist id="search-options">
        <option value="Cars"></option>
        <option value="Moto"></option>
        <option value="Airplane"></option>
      </datalist>

      <hr>

      <label for="search2">Select a category or create one</label>
      <input type="text" id="search2" list="search-options2">
      <datalist id="search-options2">
      </datalist>
  
      <button id="getlistcurrent">getlistcurrent</button>
  
    </main>
    <script>
      const inputList = document.querySelector("input");

      inputList.onchange = function (event) {
        console.warn(this.value);
        console.warn(event.target.value);
        //compara Upper to Upper
        if (event.target.value.toUpperCase() == "bike".toUpperCase()) {
          alert("Boa Escolha!");
        }
        verificaVal(event.target);
      };

      function verificaVal(e) {
        if (e.value == "Cars") {
          alert(e.value);
        }
      }

      /* ==================== */
const select = document.querySelector('#search2')
const getlistcurrent = document.querySelector("#getlistcurrent")
const searchInput  = document.querySelector("#search2")

getdata()

async function getdata() {
  const req = await fetch('https://api.geraldox.com/posts/categories')
  console.log(req)

  if(req.ok){
  const data = await req.json()
 showList(data)
 showDatList(data)
  }
 }



function showList(arr){
  select.innerHTML = arr.map((val) => {
  return `<option>${val.category}</option>`
})
}

const datalist = document.querySelector("#search-options2")

function showDatList(arr){
  datalist.innerHTML = arr.map((val) => {
  return `<option value="${val.category}">`
}).join(' ')
}


/* searchInput.onchange = function(e) {
    console.log(e.target.value)
} */

getlistcurrent.onclick = verifica;

function verifica(e){
    console.log('onclick', searchInput.value)
}
    </script>
  </body>
</html>
